[{"D:\\src\\react\\aqua-frontend\\src\\index.js":"1","D:\\src\\react\\aqua-frontend\\src\\home.js":"2","D:\\src\\react\\aqua-frontend\\src\\adicionales\\adicionales.js":"3","D:\\src\\react\\aqua-frontend\\src\\zona\\zona.js":"4","D:\\src\\react\\aqua-frontend\\src\\consumo\\consumo.js":"5","D:\\src\\react\\aqua-frontend\\src\\cliente\\cliente.js":"6","D:\\src\\react\\aqua-frontend\\src\\navbar.js":"7","D:\\src\\react\\aqua-frontend\\src\\component\\Login.js":"8","D:\\src\\react\\aqua-frontend\\src\\App.js":"9","D:\\src\\react\\aqua-frontend\\src\\component\\Layout.js":"10","D:\\src\\react\\aqua-frontend\\src\\consumo\\Deudas.js":"11"},{"size":461,"mtime":1606969575782,"results":"12","hashOfConfig":"13"},{"size":499,"mtime":1606975967553,"results":"14","hashOfConfig":"13"},{"size":1602,"mtime":1606971949442,"results":"15","hashOfConfig":"13"},{"size":3362,"mtime":1606975212762,"results":"16","hashOfConfig":"13"},{"size":4006,"mtime":1606977443676,"results":"17","hashOfConfig":"13"},{"size":7096,"mtime":1606977431071,"results":"18","hashOfConfig":"13"},{"size":911,"mtime":1606978957743,"results":"19","hashOfConfig":"13"},{"size":1784,"mtime":1606976092875,"results":"20","hashOfConfig":"13"},{"size":901,"mtime":1606977327124,"results":"21","hashOfConfig":"13"},{"size":197,"mtime":1606977408001,"results":"22","hashOfConfig":"13"},{"size":4280,"mtime":1606978872969,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"zh7euc",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\src\\react\\aqua-frontend\\src\\index.js",[],"D:\\src\\react\\aqua-frontend\\src\\home.js",[],"D:\\src\\react\\aqua-frontend\\src\\adicionales\\adicionales.js",[],"D:\\src\\react\\aqua-frontend\\src\\zona\\zona.js",[],"D:\\src\\react\\aqua-frontend\\src\\consumo\\consumo.js",["47"],"import React, { useEffect, useState } from \"react\";\r\nimport Api from \"../conexion\";\r\n\r\nimport Table from \"react-bootstrap/Table\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\n\r\nconst Consumo = (props) => {\r\n  const clienteId = props.match.params.clienteId\r\n  const [lectura_actual, setLectura] = useState(\"\");\r\n\r\n  const [datos, setDatos] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n  const [cliente, setCliente] = useState({});\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleChange = (e) => {\r\n    setLectura(e.target.value);\r\n    console.log(e.target.name, e.target.value, \"-------------\");\r\n  };\r\n\r\n  const generarConsumo = () => {\r\n    let nuevoConsumo = {\r\n      lectura_actual: lectura_actual,\r\n      consumo: lectura_actual - cliente.ultima_lectura,\r\n      costo_consumo: 25 * (lectura_actual - cliente.ultima_lectura),\r\n      costo_alcantarillado: 5,\r\n      costo_multa: 5,\r\n      mes_proceso: cliente.fecha_pago,\r\n      total_pago: 5,\r\n      fecha_pago: \"2020-11-26T21:39:09.000Z\",\r\n    };\r\n    Api.service(\"consumo\")\r\n      .create(nuevoConsumo)\r\n      .then(() => {\r\n        Api.service(\"cliente\").patch(cliente.id, {\r\n          fecha_pago: cliente.fecha_pago,\r\n          ultima_lectura: lectura_actual\r\n        });\r\n      });\r\n    console.log(nuevoConsumo);\r\n    setShow(handleClose);\r\n  };\r\n\r\n  useEffect(() => {\r\n    Api.service(\"cliente\")\r\n      .get(clienteId)\r\n      .then((response) => setCliente(response));\r\n\r\n    Api.service(\"consumo\")\r\n      .find({ query: { clienteId: clienteId } })\r\n      .then((response) => setDatos(response));\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container\">\r\n        <div>\r\n          <h1 className=\"text-center\"> Consumo de cliente </h1>\r\n          <Button variant=\"primary\" onClick={handleShow}>\r\n            Generar consumo\r\n          </Button>\r\n          <Modal show={show} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>Generar Nuevo Consumo</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <form>\r\n                <div className=\"form-group\">\r\n                  <label>Lectura actual</label>\r\n                  <input\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                    type=\"number\"\r\n                    name=\"lectura_actual\"\r\n                  />\r\n                </div>\r\n              </form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={handleClose}>\r\n                Cancelar\r\n              </Button>\r\n              <Button variant=\"primary\" onClick={generarConsumo}>\r\n                Crear\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Numero recibo</th>\r\n                <th>Cantidad consumida</th>\r\n                <th>Costo consumo</th>\r\n                <th>Alcantarillado</th>\r\n                <th>Multa</th>\r\n                <th>Total</th>\r\n                <th>Estado</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {datos.data &&\r\n                datos.data.map((dato) => {\r\n                  return (\r\n                    <tr key={dato.id}>\r\n                      <td>{dato.id}</td>\r\n                      <td>{dato.consumo}</td>\r\n                      <td>{dato.costo_consumo}</td>\r\n                      <td>{dato.costo_alcantarillado}</td>\r\n                      <td>{dato.costo_multa}</td>\r\n                      <td>{dato.total_pago}</td>\r\n                      <td>{dato.estado}</td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Consumo;\r\n","D:\\src\\react\\aqua-frontend\\src\\cliente\\cliente.js",[],"D:\\src\\react\\aqua-frontend\\src\\navbar.js",[],"D:\\src\\react\\aqua-frontend\\src\\component\\Login.js",[],"D:\\src\\react\\aqua-frontend\\src\\App.js",["48"],"D:\\src\\react\\aqua-frontend\\src\\component\\Layout.js",[],"D:\\src\\react\\aqua-frontend\\src\\consumo\\Deudas.js",[],{"ruleId":"49","severity":1,"message":"50","line":55,"column":6,"nodeType":"51","endLine":55,"endColumn":8,"suggestions":"52"},{"ruleId":"53","severity":2,"message":"54","line":15,"column":10,"nodeType":"55","endLine":15,"endColumn":16},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'clienteId'. Either include it or remove the dependency array.","ArrayExpression",["56"],"react/jsx-no-undef","'Layout' is not defined.","JSXIdentifier",{"desc":"57","fix":"58"},"Update the dependencies array to be: [clienteId]",{"range":"59","text":"60"},[1684,1686],"[clienteId]"]